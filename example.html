

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Example Ruleset &mdash; Fathom 3.7.3 documentation</title>
  

  
  <link rel="stylesheet" href="_static/tweaks.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Version History" href="versions.html" />
    <link rel="prev" title="fathom train" href="commands/train.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Fathom
          

          
          </a>

          
            
            
              <div class="version">
                3.7.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installing.html">Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="samples.html">Collecting Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules.html">Writing Rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="training.html">Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="integrating.html">Integrating</a></li>
<li class="toctree-l1"><a class="reference internal" href="maintaining.html">Maintaining</a></li>
<li class="toctree-l1"><a class="reference internal" href="zoo.html">Ruleset Zoo</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="clustering.html">Clustering</a></li>
<li class="toctree-l1"><a class="reference internal" href="exceptions.html">Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="fnodes.html">Fnodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="ruleset.html">Rules and Rulesets</a></li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">Utility Functions</a></li>
</ul>
<p class="caption"><span class="caption-text">Command Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="commands/extract.html">fathom extract</a></li>
<li class="toctree-l1"><a class="reference internal" href="commands/fox.html">fathom fox</a></li>
<li class="toctree-l1"><a class="reference internal" href="commands/histogram.html">fathom histogram</a></li>
<li class="toctree-l1"><a class="reference internal" href="commands/label.html">fathom label</a></li>
<li class="toctree-l1"><a class="reference internal" href="commands/list.html">fathom list</a></li>
<li class="toctree-l1"><a class="reference internal" href="commands/pick.html">fathom pick</a></li>
<li class="toctree-l1"><a class="reference internal" href="commands/serve.html">fathom serve</a></li>
<li class="toctree-l1"><a class="reference internal" href="commands/test.html">fathom test</a></li>
<li class="toctree-l1"><a class="reference internal" href="commands/train.html">fathom train</a></li>
</ul>
<p class="caption"><span class="caption-text">Back Matter</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Example Ruleset</a></li>
<li class="toctree-l1"><a class="reference internal" href="versions.html">Version History</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Fathom</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Example Ruleset</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/example.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="example-ruleset">
<h1>Example Ruleset<a class="headerlink" href="#example-ruleset" title="Permalink to this headline">Â¶</a></h1>
<p>This is the simple example ruleset that ships with FathomFox; it is made available for experimentation when you run <a class="reference internal" href="commands/fox.html"><span class="doc">fathom fox</span></a> without passing in your own ruleset. In its comments, it documents the structure of the <code class="docutils literal notranslate"><span class="pre">trainees</span></code> object, which is what <a class="reference internal" href="commands/train.html"><span class="doc">the trainer</span></a> needs to do its job.</p>
<div class="highlight-js notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="p">{</span><span class="nx">ruleset</span><span class="p">,</span> <span class="nx">rule</span><span class="p">,</span> <span class="nx">dom</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">score</span><span class="p">,</span> <span class="nx">out</span><span class="p">,</span> <span class="nx">utils</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;fathom-web&#39;</span><span class="p">;</span>
<span class="kr">const</span> <span class="p">{</span><span class="nx">ancestors</span><span class="p">,</span> <span class="nx">isVisible</span><span class="p">,</span> <span class="nx">linearScale</span><span class="p">,</span> <span class="nx">rgbaFromString</span><span class="p">,</span> <span class="nx">saturation</span><span class="p">}</span> <span class="o">=</span> <span class="nx">utils</span><span class="p">;</span>


<span class="cm">/**</span>
<span class="cm"> * Rulesets to vectorize or debug (and metadata about them)</span>
<span class="cm"> *</span>
<span class="cm"> * More mechanically, a map of names to {coeffs, rulesetMaker, ...} objects,</span>
<span class="cm"> * which we call &quot;trainees&quot;. The rulesets you specify here are available to the</span>
<span class="cm"> * trainer and also show up in the FathomFox UI, from which you can debug a</span>
<span class="cm"> * ruleset. Most often, all the entries here point to the same ruleset but have</span>
<span class="cm"> * different values of `vectorType` for separately training each type of thing</span>
<span class="cm"> * the ruleset recognizes.</span>
<span class="cm"> */</span>
<span class="kr">const</span> <span class="nx">trainees</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Map</span><span class="p">();</span>

<span class="cm">/**</span>
<span class="cm"> * An example ruleset. Replace it with your own.</span>
<span class="cm"> *</span>
<span class="cm"> * This one finds the full-screen, content-blocking overlays that often go</span>
<span class="cm"> * behind modal popups. It&#39;s not the most well-honed thing, but it&#39;s simple and</span>
<span class="cm"> * short.</span>
<span class="cm"> */</span>
<span class="nx">trainees</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span>
    <span class="c1">// The ID for this trainee, which must be the same as the Fathom type you</span>
    <span class="c1">// are evaluating, if you are using the FathomFox Evaluator:</span>
    <span class="s1">&#39;overlay&#39;</span><span class="p">,</span>

    <span class="c1">// Here we paste in coefficients from ``fathom train``. This lets us use</span>
    <span class="c1">// the Evaluator to see what Fathom is getting wrong. Otherwise, these</span>
    <span class="c1">// numbers do nothing until you deploy your application, so there&#39;s no need</span>
    <span class="c1">// to maintain them until then.</span>
    <span class="p">{</span><span class="nx">coeffs</span><span class="o">:</span> <span class="k">new</span> <span class="nx">Map</span><span class="p">([</span>  <span class="c1">// [rule name, coefficient]</span>
        <span class="p">[</span><span class="s1">&#39;big&#39;</span><span class="p">,</span> <span class="mf">50.4946</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;nearlyOpaque&#39;</span><span class="p">,</span> <span class="mf">48.6396</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;monochrome&#39;</span><span class="p">,</span> <span class="mf">42.8406</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;classOrId&#39;</span><span class="p">,</span> <span class="mf">0.5005</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;visible&#39;</span><span class="p">,</span> <span class="mf">55.8750</span><span class="p">]]),</span>
     <span class="c1">// Bias is -139.3106 for this example, though that isn&#39;t needed until</span>
     <span class="c1">// production.</span>

     <span class="c1">// The content-area size to use while training. Defaults to 1024x768.</span>
     <span class="nx">viewportSize</span><span class="o">:</span> <span class="p">{</span><span class="nx">width</span><span class="o">:</span> <span class="mi">1024</span><span class="p">,</span> <span class="nx">height</span><span class="o">:</span> <span class="mi">768</span><span class="p">},</span>

     <span class="c1">// The type of node to extract features from when using the Vectorizer.</span>
     <span class="c1">// Defaults to the trainee ID.</span>
     <span class="c1">//</span>
     <span class="c1">// vectorType: &#39;overlay&#39;,</span>

     <span class="nx">rulesetMaker</span><span class="o">:</span>
        <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="cm">/**</span>
<span class="cm">             * Return whether the passed-in div is the size of the whole viewport/document</span>
<span class="cm">             * or nearly so.</span>
<span class="cm">             */</span>
            <span class="kd">function</span> <span class="nx">big</span><span class="p">(</span><span class="nx">fnode</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// Compare the size of the fnode to the size of the viewport. So far, spot-</span>
                <span class="c1">// checking shows the overlay is never the size of the whole document, just</span>
                <span class="c1">// the viewport.</span>
                <span class="kr">const</span> <span class="nx">rect</span> <span class="o">=</span> <span class="nx">fnode</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">();</span>
                <span class="kr">const</span> <span class="nx">hDifference</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">rect</span><span class="p">.</span><span class="nx">height</span> <span class="o">-</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">);</span>
                <span class="kr">const</span> <span class="nx">wDifference</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">rect</span><span class="p">.</span><span class="nx">width</span> <span class="o">-</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">);</span>
                <span class="k">return</span> <span class="nx">linearScale</span><span class="p">(</span><span class="nx">hDifference</span> <span class="o">+</span> <span class="nx">wDifference</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>  <span class="c1">// 250px is getting into &quot;too tall to just be nav or something&quot; territory.</span>
            <span class="p">}</span>

            <span class="cm">/**</span>
<span class="cm">             * Return whether the fnode is almost but not entirely opaque.</span>
<span class="cm">             */</span>
            <span class="kd">function</span> <span class="nx">nearlyOpaque</span><span class="p">(</span><span class="nx">fnode</span><span class="p">)</span> <span class="p">{</span>
                <span class="kr">const</span> <span class="nx">style</span> <span class="o">=</span> <span class="nx">getComputedStyle</span><span class="p">(</span><span class="nx">fnode</span><span class="p">.</span><span class="nx">element</span><span class="p">);</span>
                <span class="kr">const</span> <span class="nx">opacity</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">style</span><span class="p">.</span><span class="nx">getPropertyValue</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">));</span>
                <span class="kd">let</span> <span class="nx">bgColorAlpha</span> <span class="o">=</span> <span class="nx">rgbaFromString</span><span class="p">(</span><span class="nx">style</span><span class="p">.</span><span class="nx">getPropertyValue</span><span class="p">(</span><span class="s1">&#39;background-color&#39;</span><span class="p">))[</span><span class="mi">3</span><span class="p">];</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">bgColorAlpha</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">bgColorAlpha</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="kr">const</span> <span class="nx">totalOpacity</span> <span class="o">=</span> <span class="nx">opacity</span> <span class="o">*</span> <span class="nx">bgColorAlpha</span><span class="p">;</span>
                <span class="kd">let</span> <span class="nx">ret</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">totalOpacity</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// seems to work even though a float</span>
                    <span class="nx">ret</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">ret</span> <span class="o">=</span> <span class="nx">linearScale</span><span class="p">(</span><span class="nx">totalOpacity</span><span class="p">,</span> <span class="mf">.4</span><span class="p">,</span> <span class="mf">.6</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="cm">/**</span>
<span class="cm">             * Return whether the fnode&#39;s bgcolor is nearly black or white.</span>
<span class="cm">             */</span>
            <span class="kd">function</span> <span class="nx">monochrome</span><span class="p">(</span><span class="nx">fnode</span><span class="p">)</span> <span class="p">{</span>
                <span class="kr">const</span> <span class="nx">rgba</span> <span class="o">=</span> <span class="nx">rgbaFromString</span><span class="p">(</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="nx">fnode</span><span class="p">.</span><span class="nx">element</span><span class="p">).</span><span class="nx">getPropertyValue</span><span class="p">(</span><span class="s1">&#39;background-color&#39;</span><span class="p">));</span>
                <span class="k">return</span> <span class="nx">linearScale</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">saturation</span><span class="p">(...</span><span class="nx">rgba</span><span class="p">),</span> <span class="mf">.96</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">suspiciousClassOrId</span><span class="p">(</span><span class="nx">fnode</span><span class="p">)</span> <span class="p">{</span>
                <span class="kr">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="nx">fnode</span><span class="p">.</span><span class="nx">element</span><span class="p">;</span>
                <span class="kr">const</span> <span class="nx">attributeNames</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">];</span>
                <span class="kd">let</span> <span class="nx">numOccurences</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="kd">function</span> <span class="nx">numberOfSuspiciousSubstrings</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;popup&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">value</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;modal&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">value</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;overlay&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">value</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;underlay&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">value</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;backdrop&#39;</span><span class="p">);</span>
                <span class="p">}</span>

                <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">name</span> <span class="k">of</span> <span class="nx">attributeNames</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">let</span> <span class="nx">values</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">values</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">values</span><span class="p">))</span> <span class="p">{</span>
                            <span class="nx">values</span> <span class="o">=</span> <span class="p">[</span><span class="nx">values</span><span class="p">];</span>
                        <span class="p">}</span>
                        <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">values</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">numOccurences</span> <span class="o">+=</span> <span class="nx">numberOfSuspiciousSubstrings</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="c1">// 1 occurrence gets us to about 75% certainty; 2, 92%. It bottoms</span>
                <span class="c1">// out at 0 and tops out at 1.</span>
                <span class="c1">// TODO: Figure out how to derive the magic number .1685 from</span>
                <span class="c1">// 0 and 1.</span>
                <span class="k">return</span> <span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="mf">.3</span> <span class="o">**</span> <span class="p">(</span><span class="nx">numOccurences</span> <span class="o">+</span> <span class="mf">.1685</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="cm">/* The actual ruleset */</span>

            <span class="kr">const</span> <span class="nx">rules</span> <span class="o">=</span> <span class="nx">ruleset</span><span class="p">([</span>
                <span class="c1">// Consider all &lt;div&gt; tags as candidate overlays:</span>
                <span class="nx">rule</span><span class="p">(</span><span class="nx">dom</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">),</span> <span class="nx">type</span><span class="p">(</span><span class="s1">&#39;overlay&#39;</span><span class="p">)),</span>

                <span class="c1">// Contribute the &quot;bigness&quot; of the node to its overlay score:</span>
                <span class="nx">rule</span><span class="p">(</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;overlay&#39;</span><span class="p">),</span> <span class="nx">score</span><span class="p">(</span><span class="nx">big</span><span class="p">),</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;big&#39;</span><span class="p">}),</span>
        
                <span class="c1">// Contibute the opacity of the node to its overlay score:</span>
                <span class="nx">rule</span><span class="p">(</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;overlay&#39;</span><span class="p">),</span> <span class="nx">score</span><span class="p">(</span><span class="nx">nearlyOpaque</span><span class="p">),</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;nearlyOpaque&#39;</span><span class="p">}),</span>
        
                <span class="c1">// Contribute some other signals as well:</span>
                <span class="nx">rule</span><span class="p">(</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;overlay&#39;</span><span class="p">),</span> <span class="nx">score</span><span class="p">(</span><span class="nx">monochrome</span><span class="p">),</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;monochrome&#39;</span><span class="p">}),</span>
                <span class="nx">rule</span><span class="p">(</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;overlay&#39;</span><span class="p">),</span> <span class="nx">score</span><span class="p">(</span><span class="nx">suspiciousClassOrId</span><span class="p">),</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;classOrId&#39;</span><span class="p">}),</span>
                <span class="nx">rule</span><span class="p">(</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;overlay&#39;</span><span class="p">),</span> <span class="nx">score</span><span class="p">(</span><span class="nx">isVisible</span><span class="p">),</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;visible&#39;</span><span class="p">}),</span>

                <span class="c1">// Offer the max-scoring overlay-typed node under the output key</span>
                <span class="c1">// &quot;overlay&quot;. The score on that node will represent the probability,</span>
                <span class="c1">// informed by a corpus of training samples, that the node is, indeed,</span>
                <span class="c1">// a pop-up overlay.</span>
                <span class="nx">rule</span><span class="p">(</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;overlay&#39;</span><span class="p">).</span><span class="nx">max</span><span class="p">(),</span> <span class="nx">out</span><span class="p">(</span><span class="s1">&#39;overlay&#39;</span><span class="p">))</span>
            <span class="p">]);</span>
            <span class="k">return</span> <span class="nx">rules</span><span class="p">;</span>
        <span class="p">}</span>

     <span class="c1">// isTarget is an optional function which returns whether the Vectorizer</span>
     <span class="c1">// should consider a fnode a target. The default is to consider it a</span>
     <span class="c1">// target iff its ``data-fathom`` attribute === the trainee ID.</span>
     <span class="c1">//</span>
     <span class="c1">// isTarget: fnode =&gt; fnode.element.dataset.fathom === &#39;foo&#39;</span>
    <span class="p">}</span>
<span class="p">);</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">trainees</span><span class="p">;</span>
</pre></div>
</td></tr></table></div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="versions.html" class="btn btn-neutral float-right" title="Version History" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="commands/train.html" class="btn btn-neutral float-left" title="fathom train" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2017-2019, Mozilla Foundation

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>